# デプロイ前の最終チェックリスト

Vercelへのデプロイ前に、以下の項目をすべて確認してください。

## 環境設定

- [ ] **GASのデプロイメントURL**が正しく取得されている
  - Google Apps Scriptエディタで「デプロイ」→「デプロイを管理」を開く
  - URLが `https://script.google.com/macros/d/.../usercontent` 形式であることを確認

- [ ] **スプレッドシートのシート名**が「Programs」になっている
  - スプレッドシートの下部を確認
  - 異なる場合は、GAS_SCRIPT.gs の `SHEET_NAME` を修正

- [ ] **スプレッドシートのデータ構造**が正しい
  - 1行目: ヘッダー行（id, type, title, organizer など）
  - 2行目以降: 企画データ
  - 最低でも1つの企画データが入力されている

## ローカル動作確認

- [ ] **開発サーバーが正常に起動**する
  ```bash
  pnpm install
  pnpm dev
  ```

- [ ] **すべてのページが表示**される
  - トップページ（/）
  - 梨花祭について（/about）
  - 企画紹介（/programs）
  - イベント情報（/events）
  - アクセス（/access）
  - 校内マップ（/access/map）
  - 広報資料（/media）
  - リアルタイム情報（/live）
  - 問い合わせ（/contact）

- [ ] **リンクが正常に動作**する
  - ナビゲーションメニューのリンク
  - ページ内のリンク
  - 外部リンク

- [ ] **GASからのデータ取得**が正常に動作する
  - 企画紹介ページでスプレッドシートのデータが表示される
  - エラーメッセージが表示されていない

- [ ] **モバイル表示**が正常である
  - ブラウザの開発者ツール（F12）でモバイルサイズに変更
  - すべてのページが正常に表示される
  - タッチ操作が正常に動作する

- [ ] **ブラウザコンソール**にエラーが表示されていない
  - F12キーを押して開発者ツールを開く
  - 「コンソール」タブを確認
  - 赤いエラーメッセージがないことを確認

## コード品質

- [ ] **TypeScriptエラー**がない
  ```bash
  pnpm type-check
  ```

- [ ] **ビルドが成功**する
  ```bash
  pnpm build
  ```

- [ ] **不要なファイル**が削除されている
  - node_modules（.gitignoreに含まれている）
  - .vite（ビルドキャッシュ）
  - dist（ビルド出力）

## Vercelデプロイ設定

- [ ] **Vercelアカウント**が作成されている
  - https://vercel.com で登録

- [ ] **ZIPファイル**が正しく作成されている
  - ファイルサイズが200KB以上（ソースコードが含まれている）
  - 圧縮されていない node_modules は除外されている

- [ ] **環境変数**が準備されている
  - VITE_GAS_DEPLOYMENT_URL: GASのデプロイメントURL

- [ ] **package.json**が正しい
  - `name`, `version`, `scripts` が設定されている
  - `dependencies` と `devDependencies` が正しい

## デプロイ後の確認

- [ ] **デプロイが成功**している
  - Vercelダッシュボードで「Ready」状態を確認

- [ ] **本番サイト**が正常に表示される
  - Vercelが提供するURLにアクセス
  - すべてのページが表示される

- [ ] **GASからのデータ取得**が本番環境で動作する
  - 企画紹介ページでスプレッドシートのデータが表示される

- [ ] **パフォーマンス**が良好である
  - ページ読み込み時間が3秒以内
  - Lighthouseスコアが80以上

- [ ] **セキュリティ**が確保されている
  - HTTPS接続が有効
  - 個人情報が含まれていない

## トラブルシューティング

### デプロイが失敗する場合

1. **ビルドログを確認**
   - Vercelダッシュボードで「Deployments」をクリック
   - 失敗したデプロイをクリック
   - 「Build Logs」でエラーメッセージを確認

2. **ローカルでビルドをテスト**
   ```bash
   pnpm build
   ```

3. **依存関係をリセット**
   ```bash
   rm -rf node_modules pnpm-lock.yaml
   pnpm install
   pnpm build
   ```

### サイトが表示されない場合

1. **環境変数を確認**
   - Vercelダッシュボードで「Settings」→「Environment Variables」を確認

2. **キャッシュをクリア**
   - ブラウザのキャッシュをクリア（Ctrl+Shift+Delete）

3. **Vercelを再デプロイ**
   - Vercelダッシュボードで「Redeploy」をクリック

## 最終確認

すべてのチェックリストが完了したら、以下を実行してください：

```bash
# ローカルでビルドをテスト
pnpm build

# ビルド結果を確認
ls -la dist/

# ZIPファイルを作成
zip -r rikasai-2026.zip . -x "node_modules/*" ".git/*" ".vite/*" "dist/*"

# ZIPファイルをVercelにアップロード
# Vercelダッシュボードで「New Project」→「Upload」を選択
```

**デプロイが完了したら、本番サイトのURLを生徒会メンバーに共有してください。**
